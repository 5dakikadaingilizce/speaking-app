<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>5 Dakikada ƒ∞ngilizce - Practice V.1.3</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <style>
        :root {
            --bg-dark: #0f172a;
            --card-bg: rgba(30, 41, 59, 0.85);
            --primary: #38bdf8;
            --secondary: #2dd4bf;
            --accent: #fb7185;
            --text-main: #f8fafc;
            --logo-grad: linear-gradient(90deg, #ff4d4d, #f97316);
        }

        body {
            margin: 0; font-family: 'Inter', sans-serif; 
            background: radial-gradient(circle at top right, #1e293b, #0f172a);
            height: 100vh; display: flex; justify-content: center; align-items: center; 
            color: var(--text-main); overflow: hidden; position: relative;
        }

        .version-tag {
            position: absolute; top: 20px; right: 20px; font-size: 10px; font-weight: bold;
            color: rgba(255, 255, 255, 0.3); background: rgba(255, 255, 255, 0.05);
            padding: 4px 10px; border-radius: 20px; border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .app {
            background: var(--card-bg); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            padding: 30px; border-radius: 35px; width: 88%; max-width: 420px; text-align: center; 
            border: 1px solid rgba(255, 255, 255, 0.1); box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.6);
            position: relative;
        }

        .app-logo { width: 90px; height: 90px; margin-bottom: 10px; object-fit: contain; }
        
        h2 { font-size: 14px; font-weight: 600; color: #94a3b8; margin: 0; }
        .sub-title { 
            font-size: 22px; font-weight: 900; margin: 5px 0 15px 0; 
            background: var(--logo-grad); -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }

        .phrase-container { min-height: 130px; display: flex; flex-direction: column; justify-content: center; margin: 10px 0; }
        #phrase-tr { font-size: 26px; font-weight: 800; color: var(--secondary); margin: 0; line-height: 1.2; }
        #phrase-en { 
            font-size: 18px; color: #94a3b8; margin-top: 15px; font-style: italic; 
            opacity: 0; transition: 0.3s; 
        }
        #phrase-en.visible { opacity: 1; }

        .start { 
            background: linear-gradient(135deg, #38bdf8, #0ea5e9); color: #0f172a; 
            width: 100%; padding: 20px; border-radius: 20px; font-size: 18px; font-weight: 800;
            border: none; cursor: pointer; box-shadow: 0 10px 20px -5px rgba(56, 189, 248, 0.4);
            animation: pulse 2.5s infinite;
        }

        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }

        .ctrl-container { display: flex; gap: 8px; margin: 15px 0; flex-wrap: wrap; }
        .ctrl { 
            background: rgba(51, 65, 85, 0.7); color: white; flex: 1; padding: 12px; 
            border-radius: 14px; border: 1px solid rgba(255,255,255,0.05); font-weight: 600; font-size: 12px;
            cursor: pointer; transition: 0.2s;
        }
        .ctrl:active { transform: scale(0.95); background: var(--primary); }
        .btn-toggle { width: 100%; background: rgba(56, 189, 248, 0.2); color: var(--primary); border: 1px solid var(--primary); margin-bottom: 5px; }
        .btn-pass { background: rgba(251, 113, 133, 0.2); color: var(--accent); border: 1px solid var(--accent); }
        
        .nav-group { display: flex; width: 100%; gap: 8px; }

        #result { font-size: 15px; font-weight: 700; margin: 10px 0; height: 35px; }
        .correct-text { color: var(--secondary); }
        .wrong-text { color: var(--accent); }
        .heard-text { display: block; font-size: 11px; color: #64748b; font-weight: normal; }

        .stats { 
            margin-top: 10px; font-size: 11px; color: #94a3b8; background: rgba(15, 23, 42, 0.4);
            padding: 12px; border-radius: 20px; display: flex; justify-content: space-between;
        }
        .stat-item { display: flex; align-items: center; gap: 4px; }
        .stat-value { color: var(--primary); font-weight: 800; font-size: 14px; }

        .restart-overlay {
            display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-dark); border-radius: 35px; flex-direction: column;
            justify-content: center; align-items: center; z-index: 20;
        }
        .restart-overlay.active { display: flex; }
    </style>
</head>
<body>

<div class="version-tag">V.1.3</div>

<div class="app">
    <div id="restartOverlay" class="restart-overlay">
        <h2 style="color:white; font-size: 24px; margin-bottom: 20px;">Lesson Completed! üèÜ</h2>
        <button class="start" onclick="restartLesson()" style="width: 80%;">RESTART LESSON</button>
    </div>

    <img src="logo.png" alt="Logo" class="app-logo">
    <h2>5 Dakikada ƒ∞ngilizce</h2>
    <div class="sub-title">#Lesson 1</div>
    
    <div class="phrase-container">
        <div id="phrase-tr">Y√úKLENƒ∞YOR...</div>
        <div id="phrase-en">ENGLISH PHRASE</div>
    </div>

    <button class="start" id="startBtn">TAP TO SPEAK</button>
    
    <div class="ctrl-container">
        <button class="ctrl btn-toggle" id="toggleBtn">SHOW ENGLISH</button>
        <button class="ctrl btn-pass" id="passBtn">PASS</button>
        <button class="ctrl" id="listenBtn">LISTEN</button>
        <div class="nav-group">
            <button class="ctrl" id="backBtn">‚Üê BACK</button>
            <button class="ctrl" id="nextBtn">NEXT ‚Üí</button>
        </div>
    </div>

    <div id="result"></div>

    <div class="stats">
        <div class="stat-item">ORDER <span class="stat-value" id="current">1</span></div>
        <div class="stat-item">‚úÖ <span class="stat-value" id="correct" style="color:#2dd4bf">0</span></div>
        <div class="stat-item">‚è≠Ô∏è PASS <span class="stat-value" id="passedCount" style="color:#fb7185">0</span></div>
        <div class="stat-item">‚è≥ <span class="stat-value" id="remaining" style="color:#f97316">0</span></div>
    </div>
</div>

<script>
// --- VERƒ∞ Lƒ∞STESƒ∞ (√∂rnekler 300 isim.docx) ---
const data = [
    {tr:"G√ºn", en:"Day"}, {tr:"Pazartesi", en:"Monday"}, {tr:"Salƒ±", en:"Tuesday"}, {tr:"√áar≈üamba", en:"Wednesday"}, {tr:"Per≈üembe", en:"Thursday"}, {tr:"Cuma", en:"Friday"}, {tr:"Cumartesi", en:"Saturday"}, {tr:"Pazar", en:"Sunday"}, {tr:"Tatil", en:"Holiday"}, {tr:"Doƒüum g√ºn√º", en:"Birthday"}, {tr:"D√ºn", en:"Yesterday"}, {tr:"Bug√ºn", en:"Today"}, {tr:"Yarƒ±n", en:"Tomorrow"}, {tr:"Ay ( Ocak, ≈ûubat..)", en:"Month"}, {tr:"Ocak", en:"January"}, {tr:"≈ûubat", en:"February"}, {tr:"Mart", en:"March"}, {tr:"Nisan", en:"April"}, {tr:"Mayƒ±s", en:"May"}, {tr:"Haziran", en:"June"}, {tr:"Temmuz", en:"July"}, {tr:"Aƒüustos", en:"August"}, {tr:"Eyl√ºl", en:"September"}, {tr:"Ekim", en:"October"}, {tr:"Kasƒ±m", en:"November"}, {tr:"Aralƒ±k", en:"December"}, {tr:"Mevsim", en:"Season"}, {tr:"ƒ∞lkbahar", en:"Spring"}, {tr:"Yaz", en:"Summer"}, {tr:"Sonbahar", en:"Autumn"}, {tr:"Kƒ±≈ü", en:"Winter"}, {tr:"Zaman", en:"Time"}, {tr:"Saniye", en:"Second"}, {tr:"Dakika", en:"Minute"}, {tr:"Saat", en:"Hour"}, {tr:"Hafta", en:"Week"}, {tr:"Yƒ±l", en:"Year"}, {tr:"Sabah", en:"Morning"}, {tr:"√ñƒüle", en:"Noon"}, {tr:"√ñƒüleden sonra", en:"Afternoon"}, {tr:"Ak≈üam", en:"Evening"}, {tr:"Gece", en:"Night"}, {tr:"Meslek", en:"Job"}, {tr:"√ñƒüretmen", en:"Teacher"}, {tr:"Garson", en:"Waiter"}, {tr:"√ñƒürenci", en:"Student"}, {tr:"M√ºd√ºr", en:"Manager"}, {tr:"Asker", en:"Soldier"}, {tr:"Polis", en:"Cop"}, {tr:"Hem≈üire", en:"Nurse"}, {tr:"Doktor", en:"Doctor"}, {tr:"Veteriner", en:"Vet"}, {tr:"Avukat", en:"Lawyer"}, {tr:"A≈ü√ßƒ±", en:"Cook"}, {tr:"ƒ∞≈ü√ßi", en:"Worker"}, {tr:"ƒ∞≈ü", en:"Work"}, {tr:"K√∂y", en:"Village"}, {tr:"Kasaba", en:"Town"}, {tr:"≈ûehir", en:"City"}, {tr:"√úlke", en:"Country"}, {tr:"T√ºrkiye", en:"Turkey"}, {tr:"T√ºrk", en:"Turkish"}, {tr:"Amerika", en:"America"}, {tr:"Amerikan", en:"American"}, {tr:"Almanya", en:"Germany"}, {tr:"Alman", en:"German"}, {tr:"Fransa", en:"France"}, {tr:"Fransƒ±z", en:"French"}, {tr:"ƒ∞talya", en:"Italy"}, {tr:"ƒ∞talyan", en:"Italian"}, {tr:"ƒ∞ngiltere", en:"England"}, {tr:"ƒ∞ngiliz", en:"English"}, {tr:"Rusya", en:"Russia"}, {tr:"Rus", en:"Russian"}, {tr:"√áin", en:"China"}, {tr:"√áinli", en:"Chinese"}, {tr:"Nehir", en:"River"}, {tr:"Deniz", en:"Sea"}, {tr:"G√∂l", en:"Lake"}, {tr:"Daƒü", en:"Mountain"}, {tr:"G√∂ky√ºz√º", en:"Sky"}, {tr:"Yƒ±ldƒ±z", en:"Star"}, {tr:"Ay (g√∂k cismi)", en:"Moon"}, {tr:"D√ºnya", en:"World"}, {tr:"Yerk√ºre", en:"Earth"}, {tr:"G√ºne≈ü", en:"Sun"}, {tr:"Hava durumu", en:"Weather"}, {tr:"Yaƒümur", en:"Rain"}, {tr:"R√ºzgar", en:"Wind"}, {tr:"Kar", en:"Snow"}, {tr:"Bulut", en:"Cloud"}, {tr:"Sis", en:"Fog"}, {tr:"Fƒ±rtƒ±na", en:"Storm"}, {tr:"Aƒüa√ß", en:"Tree"}, {tr:"Orman", en:"Forest"}, {tr:"Bah√ße", en:"Garden"}, {tr:"√ái√ßek", en:"Flower"}, {tr:"√áimen", en:"Grass"}, {tr:"Yer", en:"Place"}, {tr:"Burada", en:"Here"}, {tr:"Orada", en:"There"}, {tr:"Ev", en:"House"}, {tr:"Okul", en:"School"}, {tr:"Banka", en:"Bank"}, {tr:"Hastane", en:"Hospital"}, {tr:"D√ºkkan", en:"Shop"}, {tr:"Kafe", en:"Cafe"}, {tr:"Restoran", en:"Restaurant"}, {tr:"Ofis", en:"Office"}, {tr:"Yatak odasƒ±", en:"Bedroom"}, {tr:"Mutfak", en:"Kitchen"}, {tr:"Oturma odasƒ±", en:"Living room"}, {tr:"Banyo", en:"Bathroom"}, {tr:"Misafir odasƒ±", en:"Guest room"}, {tr:"Oda", en:"Room"}, {tr:"Kapƒ±", en:"Door"}, {tr:"Pencere", en:"Window"}, {tr:"Zemin", en:"Floor"}, {tr:"Tekli Koltuk", en:"Armchair"}, {tr:"Sandalye", en:"Chair"}, {tr:"Kanepe", en:"Couch"}, {tr:"Yatak", en:"Bed"}, {tr:"Masa", en:"Table"}, {tr:"√áalƒ±≈üma masasƒ±", en:"Desk"}, {tr:"Kitap", en:"Book"}, {tr:"Defter", en:"Notebook"}, {tr:"Kalem", en:"Pencil"}, {tr:"Bilgisayar", en:"Computer"}, {tr:"Telefon", en:"Phone"}, {tr:"Televizyon", en:"TV"}, {tr:"Buzdolabƒ±", en:"Fridge"}, {tr:"Ocak", en:"Stove"}, {tr:"Fƒ±rƒ±n", en:"Oven"}, {tr:"Ka≈üƒ±k", en:"Spoon"}, {tr:"√áatal", en:"Fork"}, {tr:"Bƒ±√ßak", en:"Knife"}, {tr:"Tabak", en:"Plate"}, {tr:"Fincan", en:"Cup"}, {tr:"Bardak", en:"Glass"}, {tr:"≈ûi≈üe", en:"Bottle"}, {tr:"Bula≈üƒ±klar", en:"Dishes"}, {tr:"Bula≈üƒ±k makinesi", en:"Dishwasher"}, {tr:"√áamaƒ±r", en:"Laundry"}, {tr:"√áama≈üƒ±r makinesi", en:"Laundry machine"}, {tr:"Hayat / Ya≈üam", en:"Life"}, {tr:"A≈ük / Sevgi", en:"Love"}, {tr:"≈ûans", en:"Luck"}, {tr:"Renk", en:"Color"}, {tr:"≈ûey", en:"Thing"}, {tr:"Top", en:"Ball"}, {tr:"Oyuncak", en:"Toy"}, {tr:"Hikaye", en:"Story"}, {tr:"Sayƒ± / Numara", en:"Number"}, {tr:"≈ûarkƒ±", en:"Song"}, {tr:"Soru", en:"Question"}, {tr:"Cevap / Yanƒ±t", en:"Answer"}, {tr:"Sorun / Dert", en:"Problem"}, {tr:"Rapor / Karne", en:"Report"}, {tr:"Toplantƒ±", en:"Meeting"}, {tr:"Para", en:"Money"}, {tr:"Uygulama", en:"App"}, {tr:"Fotoƒüraf", en:"Photo"}, {tr:"Sosyal medya", en:"Social media"}, {tr:"Resim", en:"Picture"}, {tr:"Araba", en:"Car"}, {tr:"Otob√ºs", en:"Bus"}, {tr:"Tren", en:"Train"}, {tr:"Gemi", en:"Ship"}, {tr:"Tekne", en:"Boat"}, {tr:"U√ßak", en:"Plane"}, {tr:"Bisiklet", en:"Bike"}, {tr:"Motosiklet", en:"Motorbike"}, {tr:"Yol", en:"Road"}, {tr:"Sokak", en:"Street"}, {tr:"K√∂pr√º", en:"Bridge"}, {tr:"T√ºnel", en:"Tunnel"}, {tr:"Otob√ºs duraƒüƒ±", en:"Bus stop"}, {tr:"ƒ∞stasyon", en:"Station"}, {tr:"Havalimanƒ±", en:"Airport"}, {tr:"Metro", en:"Subway"}, {tr:"Kahvaltƒ±", en:"Breakfast"}, {tr:"√ñƒüle yemeƒüi", en:"Lunch"}, {tr:"Ak≈üam yemeƒüi", en:"Dinner"}, {tr:"ƒ∞√ßecek", en:"Drink"}, {tr:"√áay", en:"Tea"}, {tr:"Kahve", en:"Coffee"}, {tr:"Su", en:"Water"}, {tr:"Kola", en:"Coke"}, {tr:"Portakal suyu", en:"Orange juice"}, {tr:"S√ºt", en:"Milk"}, {tr:"Yemek/ Besin / Gƒ±da", en:"Food"}, {tr:"Et", en:"Meat"}, {tr:"Peynir", en:"Cheese"}, {tr:"Yaƒü", en:"Oil"}, {tr:"Tuz", en:"Salt"}, {tr:"≈ûeker", en:"Sugar"}, {tr:"Ekmek", en:"Bread"}, {tr:"Tereyaƒüƒ±", en:"Butter"}, {tr:"Bal", en:"Honey"}, {tr:"Re√ßel", en:"Jam"}, {tr:"Hamburger", en:"Hamburger"}, {tr:"Pasta", en:"Cake"}, {tr:"Tavuk", en:"Chicken"}, {tr:"Tatlƒ±", en:"Dessert"}, {tr:"Yumurta", en:"Egg"}, {tr:"Zeytin", en:"Olive"}, {tr:"Makarna", en:"Pasta"}, {tr:"Pizza", en:"Pizza"}, {tr:"Salata", en:"Salad"}, {tr:"Meyveler", en:"Fruits"}, {tr:"√áilek", en:"Strawberry"}, {tr:"Elma", en:"Apple"}, {tr:"Muz", en:"Banana"}, {tr:"Portakal", en:"Orange"}, {tr:"Kiraz", en:"Cherry"}, {tr:"Sebzeler", en:"Vegetables"}, {tr:"Domates", en:"Tomato"}, {tr:"Salatalƒ±k", en:"Cucumber"}, {tr:"Biber", en:"Pepper"}, {tr:"Patates", en:"Potato"}, {tr:"Hayvan", en:"Animal"}, {tr:"Kedi", en:"Cat"}, {tr:"K√∂pek", en:"Dog"}, {tr:"Ku≈ü", en:"Bird"}, {tr:"Balƒ±k", en:"Fish"}, {tr:"At", en:"Horse"}, {tr:"Sinek", en:"Fly"}, {tr:"Fare", en:"Mouse"}, {tr:"Yƒ±lan", en:"Snake"}, {tr:"Maymun", en:"Monkey"}, {tr:"Fil", en:"Elephant"}, {tr:"Ki≈üi / Birey", en:"Person"}, {tr:"Adam", en:"Man"}, {tr:"Kadƒ±n", en:"Woman"}, {tr:"√áocuk", en:"Child"}, {tr:"Erkek √ßocuk", en:"Boy"}, {tr:"Kƒ±z √ßocuk", en:"Girl"}, {tr:"Bebek", en:"Baby"}, {tr:"Gen√ß / Ergen", en:"Teenager"}, {tr:"Akrabalar", en:"Relatives"}, {tr:"Aile", en:"Family"}, {tr:"Ebeveynler", en:"Parents"}, {tr:"Baba", en:"Father"}, {tr:"Anne", en:"Mother"}, {tr:"Dede", en:"Grandfather"}, {tr:"B√ºy√ºkanne", en:"Grandmother"}, {tr:"Erkek torun", en:"Grandson"}, {tr:"Kƒ±z torun", en:"Granddaughter"}, {tr:"Erkek evlat", en:"Son"}, {tr:"Kƒ±z evlat", en:"Daughter"}, {tr:"Erkek karde≈ü", en:"Brother"}, {tr:"Kƒ±z karde≈ü", en:"Sister"}, {tr:"Teyze/hala", en:"Aunt"}, {tr:"Amca/dayƒ±", en:"Uncle"}, {tr:"Kuzen", en:"Cousin"}, {tr:"Giysiler", en:"Clothes"}, {tr:"Palto / Mont / Kaban", en:"Coat"}, {tr:"Elbise", en:"Dress"}, {tr:"≈ûapka", en:"Hat"}, {tr:"Ceket", en:"Jacket"}, {tr:"Kot pantolon", en:"Jeans"}, {tr:"G√∂mlek", en:"Shirt"}, {tr:"Ayakkabƒ±(lar)", en:"Shoes"}, {tr:"≈ûort", en:"Shorts"}, {tr:"√áorap(lar)", en:"Socks"}, {tr:"Kazak", en:"Sweater"}, {tr:"Pantolon", en:"Trousers"}, {tr:"Saat (kol saati)", en:"Watch"}, {tr:"Ti≈ü√∂rt", en:"T-shirt"}, {tr:"V√ºcut", en:"Body"}, {tr:"Ba≈ü ( ƒ∞nsan kafasƒ±)", en:"Head"}, {tr:"Y√ºz (insan y√ºz√º)", en:"Face"}, {tr:"G√∂z", en:"Eye"}, {tr:"Sa√ß", en:"Hair"}, {tr:"Kulak", en:"Ear"}, {tr:"Burun", en:"Nose"}, {tr:"Aƒüƒ±z", en:"Mouth"}, {tr:"Di≈ü", en:"Tooth"}, {tr:"Dil", en:"Tongue"}, {tr:"Kol", en:"Arm"}, {tr:"Bacak", en:"Leg"}, {tr:"El", en:"Hand"}, {tr:"Parmak ( el )", en:"Finger"}, {tr:"Ayak", en:"Foot"}, {tr:"Ayak parmaƒüƒ±", en:"Toe"}
];

let index = 0, correctCount = 0, passedCount = 0, isListening = false, showEn = false;
let currentList = [...data];

const phraseTrEl = document.getElementById("phrase-tr");
const phraseEnEl = document.getElementById("phrase-en");
const resultEl = document.getElementById("result");
const startBtn = document.getElementById("startBtn");
const toggleBtn = document.getElementById("toggleBtn");
const passBtn = document.getElementById("passBtn");
const restartOverlay = document.getElementById("restartOverlay");

// --- GELƒ∞≈ûMƒ∞≈û SABƒ∞T SESLENDƒ∞RME ---
function speak() {
    window.speechSynthesis.cancel();
    const u = new SpeechSynthesisUtterance(currentList[index].en);
    u.lang = "en-US";
    u.rate = 0.8; // Doƒüru telaffuz i√ßin hafif yava≈ülatƒ±lmƒ±≈ü
    u.pitch = 1.1; // Daha doƒüal bir kadƒ±n sesi tonu i√ßin hafif tiz

    // Tarayƒ±cƒ±daki t√ºm sesleri al ve en iyi US-English kadƒ±n sesini se√ß
    const voices = window.speechSynthesis.getVoices();
    const preferredVoice = voices.find(v => (v.name.includes("Female") || v.name.includes("Google")) && v.lang.startsWith("en-US")) 
                         || voices.find(v => v.lang.startsWith("en-US"));
    
    if (preferredVoice) u.voice = preferredVoice;
    
    window.speechSynthesis.speak(u);
}

// Ses listesi y√ºklendiƒüinde hazƒ±rlƒ±k yap (Bazƒ± tarayƒ±cƒ±lar i√ßin gerekli)
window.speechSynthesis.onvoiceschanged = () => { window.speechSynthesis.getVoices(); };

function playBeep(isCorrect) {
    const AudioCtx = window.AudioContext || window.webkitAudioContext;
    const ctx = new AudioCtx();
    if (ctx.state === 'suspended') ctx.resume();
    const osc = ctx.createOscillator();
    const g = ctx.createGain();
    osc.type = 'triangle';
    osc.connect(g); g.connect(ctx.destination);
    osc.frequency.setValueAtTime(isCorrect ? 800 : 150, ctx.currentTime);
    g.gain.setValueAtTime(0.4, ctx.currentTime);
    g.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.3);
    osc.start(); osc.stop(ctx.currentTime + 0.3);
}

function render() {
    if (index >= currentList.length) {
        restartOverlay.classList.add("active");
        return;
    }
    
    phraseTrEl.textContent = currentList[index].tr;
    phraseEnEl.textContent = currentList[index].en;
    
    if(!showEn) phraseEnEl.classList.remove("visible");
    else phraseEnEl.classList.add("visible");
    
    toggleBtn.innerText = showEn ? "HIDE ENGLISH" : "SHOW ENGLISH";
    
    document.getElementById("current").textContent = index + 1;
    document.getElementById("correct").textContent = correctCount;
    document.getElementById("passedCount").textContent = passedCount;
    document.getElementById("remaining").textContent = currentList.length - (index + 1);
}

function restartLesson() {
    index = 0; correctCount = 0; passedCount = 0;
    currentList = [...data];
    restartOverlay.classList.remove("active");
    resultEl.innerHTML = "";
    render();
}

toggleBtn.onclick = () => { showEn = !showEn; render(); };

passBtn.onclick = () => {
    passedCount++;
    currentList.push(currentList[index]); // Pas ge√ßileni sona at
    resultEl.innerHTML = '<span style="color:#94a3b8">PASSED ‚è≠Ô∏è (Sent to end)</span>';
    setTimeout(() => {
        index++; 
        resultEl.innerHTML = ""; 
        showEn = false; 
        render(); 
    }, 200);
};

const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
const rec = new SR();
rec.lang = "en-US";
rec.continuous = true;

rec.onstart = () => { 
    isListening = true;
    startBtn.innerText = "TAP TO FINISH"; 
    startBtn.style.background = "#fb7185"; 
    startBtn.style.animation = "none"; 
};

rec.onresult = e => {
    const spoken = e.results[e.results.length - 1][0].transcript.toLowerCase().replace(/[.,!?;:]/g, "").trim();
    const target = currentList[index].en.toLowerCase().replace(/[.,!?;:]/g, "").trim();

    if (spoken === target || spoken.includes(target)) {
        correctCount++;
        resultEl.innerHTML = '<span class="correct-text">EXCELLENT! ‚úÖ</span>';
        playBeep(true);
        setTimeout(() => {
            index++; 
            resultEl.innerHTML = ""; 
            showEn = false; 
            render(); 
        }, 200); 
    } else {
        resultEl.innerHTML = `<span class="wrong-text">TRY AGAIN ‚ùå</span><span class="heard-text">Heard: "${spoken}"</span>`;
        playBeep(false);
    }
};

rec.onend = () => { 
    isListening = false;
    startBtn.innerText = "TAP TO SPEAK"; 
    startBtn.style.background = ""; 
    startBtn.style.animation = "pulse 2.5s infinite"; 
};

startBtn.onclick = () => { 
    if (!isListening) { resultEl.innerHTML = ""; try { rec.start(); } catch(e) {} } 
    else { rec.stop(); }
};

document.getElementById("listenBtn").onclick = speak;
document.getElementById("backBtn").onclick = () => { if(index > 0) { index--; resultEl.innerHTML = ""; showEn = false; render(); } };
document.getElementById("nextBtn").onclick = () => { index++; resultEl.innerHTML = ""; showEn = false; render(); };

render();
</script>
</body>
</html>
