<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Sistematik ƒ∞ngilizce v3.5</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        :root {
            --bg-dark: #0f172a; --card-bg: rgba(30, 41, 59, 0.9);
            --primary: #38bdf8; --secondary: #2dd4bf;
            --accent: #fb7185; --text-main: #f8fafc;
        }
        body {
            margin: 0; font-family: 'Inter', sans-serif; 
            background: radial-gradient(circle at top right, #1e293b, #0f172a);
            height: 100vh; display: flex; justify-content: center; align-items: center; color: var(--text-main);
            overflow: hidden;
        }
        .app {
            background: var(--card-bg); backdrop-filter: blur(20px);
            padding: 25px; border-radius: 40px; width: 85%; max-width: 400px; text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1); box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }
        .progress-info { font-size: 11px; color: var(--primary); font-weight: bold; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 1px; }
        #phrase { font-size: 26px; font-weight: 800; color: var(--secondary); margin: 15px 0; min-height: 80px; display: flex; align-items: center; justify-content: center; }
        #translation { font-size: 18px; color: #94a3b8; margin-bottom: 20px; font-style: italic; visibility: hidden; }
        #translation.visible { visibility: visible; }
        .main-btn { 
            background: linear-gradient(135deg, #38bdf8, #0ea5e9); color: #0f172a; 
            width: 100%; padding: 20px; border-radius: 20px; font-size: 18px; font-weight: 800; border: none; cursor: pointer;
            transition: 0.2s;
        }
        .main-btn:active { transform: scale(0.98); }
        .controls { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px; }
        .btn-s { background: rgba(255,255,255,0.05); color: white; border: 1px solid rgba(255,255,255,0.1); padding: 12px; border-radius: 15px; font-size: 12px; cursor: pointer; }
        #result { margin-top: 10px; font-size: 13px; font-weight: bold; height: 20px; color: var(--accent); }
    </style>
</head>
<body>

<div class="app">
    <div class="progress-info" id="progressText">Y√ºkleniyor...</div>
    
    <div id="phrase">BA≈ûLAMAK ƒ∞√áƒ∞N DOKUN</div>
    <div id="translation">√áeviri</div>

    <button class="main-btn" id="speakBtn">KONU≈ûMAYI BA≈ûLAT</button>
    
    <div class="controls">
        <button class="btn-s" onclick="playAudio()">Dƒ∞NLE (üîà)</button>
        <button class="btn-s" onclick="toggleTrans()">√áEVƒ∞Rƒ∞ (üëÅÔ∏è)</button>
        <button class="btn-s" style="grid-column: span 2;" onclick="manualNext()">SONRAKƒ∞ VARYASYON ‚û°Ô∏è</button>
    </div>

    <div id="result"></div>
</div>

<script>
// --- 1. VERƒ∞ SETƒ∞ (Buraya 280 ismi ekleyeceksin) ---
const nouns = [
    {en:"day", tr:"g√ºn", plural:"days", vowel:false},
    {en:"monday", tr:"pazartesi", plural:"mondays", vowel:false},
    {en:"apple", tr:"elma", plural:"apples", vowel:true},
    {en:"child", tr:"√ßocuk", plural:"children", vowel:false}
    // ... isimler sƒ±rayla devam eder
];

const preps = [
    {en:"of", tr:"-in"}, {en:"to", tr:"-e"}, {en:"for", tr:"i√ßin"}, 
    {en:"with", tr:"ile"}, {en:"without", tr:"olmadan"}, {en:"about", tr:"hakkƒ±nda"}
];

const dets = [
    {en:"a/an", tr:"bir", num:1}, {en:"the", tr:"", num:0}, 
    {en:"my", tr:"benim", num:0}, {en:"your", tr:"senin", num:0}, 
    {en:"two", tr:"iki", num:2}, {en:"three", tr:"√º√ß", num:3}
];

// --- 2. Sƒ∞STEMATƒ∞K MOTOR ---
let nounIndex = 0; // Hangi isimdeyiz?
let prepIndex = 0; // Hangi edattayƒ±z?
let detIndex = 0;  // Hangi belirte√ßteyiz?
let currentPhrase = null;

function generateCurrent() {
    const n = nouns[nounIndex];
    const p = preps[prepIndex];
    const d = dets[detIndex];

    let detStr = d.en;
    let nounStr = n.en;
    let nounTr = n.tr;

    // a/an kuralƒ±
    if(d.en === "a/an") detStr = n.vowel ? "an" : "a";
    
    // √áoƒüul kuralƒ± (2-3-4... olunca)
    if(d.num > 1) {
        nounStr = n.plural;
        nounTr = n.plural + " (√ßoƒüul)"; // ƒ∞stersen T√ºrk√ße takƒ±sƒ±nƒ± da d√ºzeltebilirsin
    }

    currentPhrase = {
        en: `${p.en} ${detStr} ${nounStr}`.replace(/\s+/g, ' ').trim(),
        tr: `${d.num > 0 ? d.tr + ' ' : ''}${nounTr} ${p.tr}`.trim()
    };

    updateUI();
}

function updateUI() {
    document.getElementById("phrase").textContent = currentPhrase.en;
    document.getElementById("translation").textContent = currentPhrase.tr;
    document.getElementById("translation").classList.remove("visible");
    document.getElementById("progressText").textContent = 
        `ƒ∞Sƒ∞M: ${nounIndex + 1}/${nouns.length} | VARYASYON: ${((prepIndex * dets.length) + detIndex + 1)}/${preps.length * dets.length}`;
}

function manualNext() {
    // √ñnce belirte√ßleri (a, the, my...) bitir
    detIndex++;
    if (detIndex >= dets.length) {
        detIndex = 0;
        prepIndex++; // Sonra edatlarƒ± (of, to, for...) bitir
    }
    
    if (prepIndex >= preps.length) {
        prepIndex = 0;
        detIndex = 0;
        nounIndex++; // Her ≈üey bittikten sonra YENƒ∞ ƒ∞SME GE√á
    }

    if (nounIndex >= nouns.length) {
        alert("TEBRƒ∞KLER! T√ºm liste ve 16.000+ kombinasyon bitti.");
        nounIndex = 0;
    }
    generateCurrent();
}

// --- 3. SES VE TANIMA ---
const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
const rec = new SR(); rec.lang = "en-US";

rec.onresult = e => {
    const spoken = e.results[0][0].transcript.toLowerCase().trim();
    const target = currentPhrase.en.toLowerCase().trim();

    if(spoken === target) {
        document.getElementById("result").style.color = "var(--secondary)";
        document.getElementById("result").textContent = "‚úÖ DOƒûRU!";
        setTimeout(manualNext, 1000);
    } else {
        document.getElementById("result").style.color = "var(--accent)";
        document.getElementById("result").textContent = `‚ùå TEKRAR DENE (Duyulan: ${spoken})`;
    }
};

document.getElementById("speakBtn").onclick = () => rec.start();
function playAudio() {
    const u = new SpeechSynthesisUtterance(currentPhrase.en);
    u.lang = "en-US"; window.speechSynthesis.speak(u);
}
function toggleTrans() { document.getElementById("translation").classList.toggle("visible"); }

// ƒ∞lk c√ºmleyi olu≈ütur
generateCurrent();
</script>
</body>
</html>
