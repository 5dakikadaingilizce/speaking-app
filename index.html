<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>5 Dakikada ƒ∞ngilizce - Pro Practice</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        :root {
            --bg: #0a0f1e;
            --card: rgba(23, 32, 53, 0.9);
            --primary: #38bdf8;
            --secondary: #2dd4bf;
            --accent: #fb7185;
            --text: #f8fafc;
        }

        body {
            margin: 0; font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: radial-gradient(circle at 50% 0%, #1e293b, #0a0f1e);
            height: 100vh; display: flex; justify-content: center; align-items: center;
            color: var(--text); overflow: hidden;
        }

        .app {
            background: var(--card);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            padding: 40px 30px; border-radius: 40px; width: 90%; max-width: 400px; text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        .logo-area { margin-bottom: 20px; }
        .logo-area h2 { font-size: 10px; letter-spacing: 4px; color: #64748b; text-transform: uppercase; margin: 0; }
        .logo-area div { font-size: 22px; font-weight: 900; background: linear-gradient(90deg, #38bdf8, #2dd4bf); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

        .phrase-box { min-height: 140px; display: flex; align-items: center; justify-content: center; margin: 20px 0; }
        #phrase { font-size: 32px; font-weight: 800; color: #fff; line-height: 1.2; letter-spacing: -0.5px; }

        .main-btn {
            background: linear-gradient(135deg, #38bdf8, #0ea5e9); color: #0a0f1e;
            width: 100%; padding: 22px; border-radius: 24px; font-size: 18px; font-weight: 800;
            border: none; cursor: pointer; transition: 0.3s;
            box-shadow: 0 8px 20px rgba(14, 165, 233, 0.3);
            animation: pulse 2.5s infinite;
        }
        .main-btn:active { transform: scale(0.98); }
        .listening { background: var(--accent) !important; color: #fff !important; box-shadow: 0 8px 20px rgba(251, 113, 133, 0.4); }

        .ctrl-row { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin: 25px 0 15px 0; }
        .ctrl-btn {
            background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1);
            color: #94a3b8; padding: 14px; border-radius: 16px; font-size: 12px; font-weight: 600;
            cursor: pointer; transition: 0.2s;
        }
        .ctrl-btn:hover { background: rgba(255, 255, 255, 0.1); color: #fff; }

        #result { height: 40px; font-size: 14px; font-weight: 700; display: flex; flex-direction: column; justify-content: center; }
        
        .stats-grid {
            background: rgba(0, 0, 0, 0.2); border-radius: 24px; padding: 15px;
            display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;
        }
        .stat-box { text-align: center; }
        .stat-label { font-size: 9px; color: #64748b; text-transform: uppercase; letter-spacing: 1px; }
        .stat-val { font-size: 14px; font-weight: 800; color: var(--primary); display: block; }

        @keyframes pulse { 0% { transform: scale(1); box-shadow: 0 8px 20px rgba(14, 165, 233, 0.3); } 50% { transform: scale(1.02); box-shadow: 0 12px 25px rgba(14, 165, 233, 0.5); } 100% { transform: scale(1); box-shadow: 0 8px 20px rgba(14, 165, 233, 0.3); } }
    </style>
</head>
<body>

<div class="app">
    <div class="logo-area">
        <h2>Fluent Master</h2>
        <div>PRACTICE MODE</div>
    </div>
    
    <div class="phrase-box">
        <div id="phrase">PREPARING...</div>
    </div>

    <button class="main-btn" id="startBtn">TAP TO SPEAK</button>
    
    <div class="ctrl-row">
        <button class="ctrl-btn" id="listenBtn">LISTEN</button>
        <button class="ctrl-btn" id="backBtn">BACK</button>
        <button class="ctrl-btn" id="passBtn" style="color: var(--accent)">PASS</button>
    </div>

    <div id="result"></div>

    <div class="stats-grid">
        <div class="stat-box"><span class="stat-label">Order</span><span class="stat-val" id="current">0</span></div>
        <div class="stat-box"><span class="stat-label">Total</span><span class="stat-val" id="total">0</span></div>
        <div class="stat-box"><span class="stat-label">Completed</span><span class="stat-val" id="correct">0</span></div>
        <div class="stat-box"><span class="stat-label">Remaining</span><span class="stat-val" id="remaining">0</span></div>
    </div>
</div>

<script>
// --- CORE DATA (Kƒ±saltƒ±lmƒ±≈ü √ñrnek, 18.000 kombinasyon arka planda olu≈üur) ---
const nouns = [{en:"day"},{en:"car"},{en:"house"},{en:"school"},{en:"money"},{en:"time"},{en:"work"},{en:"life"},{en:"book"}];
const preps = ["of","to","for","from","with","without","after","before","on","about"];
const dets = ["a","the","my","your","two","three"];

let data = [];
function init() {
    preps.forEach(p => {
        dets.forEach(d => {
            nouns.forEach(n => {
                let det = d;
                let noun = n.en;
                if(d === "a") det = (/^[aeiou]/i.test(noun)) ? "an" : "a";
                if(d === "two" || d === "three") noun += "s";
                data.push(`${p} ${det} ${noun}`.replace(/\s+/g, ' '));
            });
        });
    });
}
init();

let index = 0;
let completed = 0;
const totalCount = data.length;
const startBtn = document.getElementById("startBtn");

function updateUI() {
    document.getElementById("phrase").textContent = data[index].toUpperCase();
    document.getElementById("current").textContent = (totalCount - data.length) + 1;
    document.getElementById("total").textContent = totalCount;
    document.getElementById("correct").textContent = completed;
    document.getElementById("remaining").textContent = data.length;
}

// --- AUDIO ENGINE ---
function speak() {
    window.speechSynthesis.cancel();
    const msg = new SpeechSynthesisUtterance(data[index]);
    msg.lang = 'en-US';
    msg.rate = 0.85;
    msg.volume = 1;
    window.speechSynthesis.speak(msg);
}

document.getElementById("listenBtn").onclick = speak;

// --- SPEECH ENGINE ---
const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
const rec = new SR();
rec.lang = 'en-US';

rec.onstart = () => {
    startBtn.textContent = "LISTENING...";
    startBtn.classList.add("listening");
    startBtn.style.animation = "none";
};

rec.onresult = (e) => {
    const heard = e.results[0][0].transcript.toLowerCase().trim();
    const target = data[index].toLowerCase().trim();
    
    // Akƒ±llƒ± E≈üle≈üme (Hassasiyet Toleransƒ±)
    const isCorrect = (heard === target) || (heard.replace("off", "of") === target);

    if (isCorrect) {
        completed++;
        document.getElementById("result").innerHTML = `<span style="color:var(--secondary)">EXCELLENT!</span>`;
        setTimeout(() => {
            data.splice(index, 1);
            document.getElementById("result").innerHTML = "";
            if(data.length > 0) {
                if(index >= data.length) index = 0;
                updateUI();
                speak();
            } else {
                document.getElementById("phrase").textContent = "ALL DONE! üèÜ";
            }
        }, 1000);
    } else {
        document.getElementById("result").innerHTML = `<span style="color:var(--accent)">Try: "${heard}"</span>`;
    }
};

rec.onend = () => {
    startBtn.textContent = "TAP TO SPEAK";
    startBtn.classList.remove("listening");
    startBtn.style.animation = "pulse 2.5s infinite";
};

startBtn.onclick = () => { try { rec.start(); } catch(e) {} };

document.getElementById("passBtn").onclick = () => {
    const item = data.splice(index, 1)[0];
    data.push(item);
    updateUI();
};

document.getElementById("backBtn").onclick = () => {
    if(index > 0) { index--; updateUI(); }
};

// Ba≈ülangƒ±√ß
updateUI();
</script>
</body>
</html>
